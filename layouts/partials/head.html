{{/*
  Head partial: production-ready basics
  - Typography + layout via /css/site.css
  - Dark mode via data-theme on <html>
  - Meta description prefers .Params.description, then .Params.summary
*/}}

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>{{ if .Title }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>

{{/* Meta description */}}
{{ $desc := "" }}
{{ with .Params.description }}{{ $desc = . }}{{ end }}
{{ if and (not $desc) (.Params.summary) }}{{ $desc = .Params.summary }}{{ end }}
{{ if $desc }}<meta name="description" content="{{ $desc }}" />{{ end }}

{{/* Canonical */}}
{{ with .Permalink }}<link rel="canonical" href="{{ . }}" />{{ end }}

{{/* OpenGraph (minimal) */}}
<meta property="og:site_name" content="{{ .Site.Title }}" />
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}" />
<meta property="og:title" content="{{ if .Title }}{{ .Title }}{{ else }}{{ .Site.Title }}{{ end }}" />
{{ if $desc }}<meta property="og:description" content="{{ $desc }}" />{{ end }}
<meta property="og:url" content="{{ .Permalink }}" />

{{/* Theme-color for browsers */}}
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#0b0f17" media="(prefers-color-scheme: dark)" />

{{/* Early theme init (prevents flash) */}}
<script>
  (function () {
    try {
      var saved = localStorage.getItem('theme');
      var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      var theme = saved ? saved : (prefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
    } catch (e) {}
  })();
</script>

<link rel="stylesheet" href="/css/site.css" />
